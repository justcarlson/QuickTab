---
phase: 03-ui-migration
plan: 04
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Popup displays current detection mode and allows toggling between modes"
    - "Settings changes persist across browser sessions"
    - "Welcome page displays correctly on first install"
    - "i18n strings load and display in English locale"
    - "Zero jQuery or Handlebars dependencies remain in codebase"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete UI migration by testing popup and welcome page functionality.

Purpose: Ensure all Phase 3 success criteria are met before marking the phase complete. Human verification of visual UI and user flows.

Output: Verified working UI, ready for Phase 4.
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-ui-migration/03-CONTEXT.md
@.planning/phases/03-ui-migration/03-02-SUMMARY.md
@.planning/phases/03-ui-migration/03-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify no jQuery or Handlebars dependencies</name>
  <files></files>
  <action>
Search the codebase for any jQuery or Handlebars references:

```bash
# Check for jQuery
grep -r "jquery\|jQuery\|\\\$(" entrypoints/ src/ --include="*.ts" --include="*.js" --include="*.html"

# Check for Handlebars
grep -r "handlebars\|Handlebars\|{{" entrypoints/ src/ --include="*.ts" --include="*.js" --include="*.html"

# Check package.json for dependencies
grep -E "jquery|handlebars" package.json
```

All searches should return empty results.

Also verify the build output doesn't include these libraries:
```bash
# Check bundle for library names
grep -r "jquery\|handlebars" .output/chrome-mv3/ --include="*.js" 2>/dev/null || echo "Clean: no matches found"
```
  </action>
  <verify>
All grep commands return no matches.
The codebase contains zero jQuery or Handlebars code.
  </verify>
  <done>
Codebase verified clean of jQuery and Handlebars dependencies.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build and prepare for verification</name>
  <files></files>
  <action>
Build the extension and verify it loads correctly:

```bash
# Clean build
rm -rf .output
npm run build

# Verify outputs exist
ls -la .output/chrome-mv3/popup.html
ls -la .output/chrome-mv3/welcome.html
ls -la .output/chrome-mv3/images/pages/welcome/

# Check for any build warnings
npm run build 2>&1 | grep -i "warn\|error" || echo "Build clean"
```

Provide instructions for loading the extension:
1. Open Chrome and navigate to chrome://extensions/
2. Enable "Developer mode" toggle
3. Click "Load unpacked"
4. Select the `.output/chrome-mv3` directory
5. Note the extension ID for testing
  </action>
  <verify>
Build completes without errors.
All expected files exist in .output/chrome-mv3/.
  </verify>
  <done>
Extension built and ready for manual verification.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete popup and welcome page UI migration from jQuery/Handlebars to vanilla TypeScript:
- Popup with three-way detection mode toggle (allUrls, ticketUrls, noUrls)
- Popup with help section (docs link, welcome page link)
- Welcome page with hero image, FAQ cards, and CTA button
- Dark mode support via system preference
- i18n support using Chrome's native API
  </what-built>
  <how-to-verify>

**Popup Verification:**

1. Click the QuickTab extension icon in the toolbar to open popup
2. Verify popup displays with heading "Link handling"
3. Verify three mode options display:
   - "All agent links" (should be selected by default)
   - "Ticket links only"
   - "Off (disabled)"
4. Click "Ticket links only" - verify radio selection changes immediately
5. Close popup and reopen - verify "Ticket links only" is still selected (persistence)
6. Click "Off (disabled)" - verify icon changes to disabled state
7. Click "Open welcome screen" link - verify welcome page opens in new tab
8. Click "Open README" link - verify GitHub README opens in new tab

**Welcome Page Verification:**

1. Navigate to chrome-extension://[ID]/welcome.html (or use popup link)
2. Verify hero image displays (QuickTab screenshot)
3. Verify headline: "Keep Zendesk in one calm tab"
4. Verify 4 FAQ cards display in 2x2 grid:
   - "Why you need this"
   - "How it works"
   - "Will I lose work?"
   - "Which links are covered?"
5. Verify "Open the README" button at bottom links to GitHub

**Dark Mode Verification:**

1. Change your system to dark mode (or use Chrome DevTools to emulate)
2. Verify popup background changes to dark (#111311)
3. Verify welcome page background changes to dark
4. Verify text is readable (light text on dark background)

**First Install Simulation:**

1. Remove the extension from Chrome
2. Reload the unpacked extension
3. Verify welcome page automatically opens on install

  </how-to-verify>
  <resume-signal>
Type "approved" if all verification steps pass.
If any issues found, describe them and I will create fix tasks.
  </resume-signal>
</task>

</tasks>

<verification>
Phase 3 success criteria from ROADMAP.md:
1. Popup displays current detection mode and allows toggling between modes
2. Settings changes persist across browser sessions
3. Welcome page displays correctly on first install
4. i18n strings load and display in English locale
5. Zero jQuery or Handlebars dependencies remain in codebase
</verification>

<success_criteria>
All Phase 3 success criteria verified:
- Popup mode toggle works and persists
- Welcome page displays on first install
- All text uses i18n strings
- No jQuery or Handlebars in codebase
</success_criteria>

<output>
After completion, create `.planning/phases/03-ui-migration/03-04-SUMMARY.md`
</output>
