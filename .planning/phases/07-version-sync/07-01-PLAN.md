---
phase: 07-version-sync
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - .release-please-manifest.json
  - release-please-config.json
autonomous: true

must_haves:
  truths:
    - "package.json shows version 1.0.1"
    - "release-please manifest shows version 1.0.1"
    - "release-please config has last-release-sha pointing to v1.0 tag"
    - "pnpm build produces quicktab-v1.0.1-chrome.zip"
  artifacts:
    - path: "package.json"
      provides: "Version source of truth"
      contains: '"version": "1.0.1"'
    - path: ".release-please-manifest.json"
      provides: "Release-please version tracking"
      contains: '".": "1.0.1"'
    - path: "release-please-config.json"
      provides: "Release-please sync configuration"
      contains: "last-release-sha"
  key_links:
    - from: "package.json"
      to: "wxt.config.ts"
      via: "WXT reads version for build artifacts"
      pattern: "version.*1\\.0\\.1"
    - from: ".release-please-manifest.json"
      to: "release-please-config.json"
      via: "Manifest version matches last-release-sha epoch"
      pattern: "1\\.0\\.1"
---

<objective>
Synchronize version across package.json, release-please manifest, and config to resolve the mismatch between source files (0.12.3) and GitHub release (v1.0).

Purpose: Enable release-please to correctly track version 1.0.1 as the next release, ensuring CI produces correctly named artifacts and future releases work properly.

Output: All version files updated to 1.0.1, release-please configured to start from v1.0 tag commit.
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-version-sync/07-RESEARCH.md

# Source files
@package.json
@.release-please-manifest.json
@release-please-config.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update version files to 1.0.1</name>
  <files>
    package.json
    .release-please-manifest.json
    release-please-config.json
  </files>
  <action>
Update three files with coordinated version changes:

1. **package.json** - Change `"version": "0.12.3"` to `"version": "1.0.1"`

2. **.release-please-manifest.json** - Change `".": "0.12.3"` to `".": "1.0.1"`

3. **release-please-config.json** - Add `"last-release-sha": "77d036884b51318b1d3443578d2fa2e99bffca3f"` after the `"include-component-in-tag"` line. This SHA is the v1.0 tag commit and tells release-please to only include commits AFTER v1.0 when generating the next changelog.

Critical: Do NOT update CHANGELOG.md - release-please will handle that when the next release PR merges.
  </action>
  <verify>
```bash
# Verify package.json version
jq -r .version package.json | grep -q "1.0.1" && echo "package.json: OK" || echo "package.json: FAIL"

# Verify manifest version
jq -r '."."' .release-please-manifest.json | grep -q "1.0.1" && echo "manifest: OK" || echo "manifest: FAIL"

# Verify last-release-sha in config
jq -r '.["last-release-sha"]' release-please-config.json | grep -q "77d036884b51318b1d3443578d2fa2e99bffca3f" && echo "config: OK" || echo "config: FAIL"
```
  </verify>
  <done>
All three files show version 1.0.1 and release-please config has last-release-sha pointing to v1.0 tag commit.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify build produces correctly versioned artifact</name>
  <files>
    .output/quicktab-v1.0.1-chrome.zip
  </files>
  <action>
Run the build and zip process to confirm WXT picks up the new version from package.json:

1. Run `pnpm build` to create production build
2. Run `pnpm zip` to create distribution archive
3. Verify the output filename contains v1.0.1

The build should produce `.output/quicktab-v1.0.1-chrome.zip` (not the old v0.12.3 version).
  </action>
  <verify>
```bash
# Build and zip
pnpm build && pnpm zip

# Check for correctly versioned zip file
ls -la .output/*.zip | grep -q "v1.0.1" && echo "Build artifact: OK" || echo "Build artifact: FAIL"

# Confirm no old version artifacts
ls .output/*.zip | grep -v "v1.0.1" && echo "WARNING: Old version artifacts exist" || echo "No old artifacts: OK"
```
  </verify>
  <done>
Build produces `.output/quicktab-v1.0.1-chrome.zip` with correct version number in filename.
  </done>
</task>

</tasks>

<verification>
All requirements verified:

- VER-01: `jq -r .version package.json` outputs "1.0.1"
- VER-02: `release-please-config.json` has `last-release-sha` set to v1.0 tag commit
- VER-03: `.output/quicktab-v1.0.1-chrome.zip` exists after build

Note: VER-02 (release-please workflow) will be fully confirmed when the next push triggers release-please action, but the configuration is now correct for it to work.
</verification>

<success_criteria>
1. `package.json` version field is "1.0.1"
2. `.release-please-manifest.json` shows ".": "1.0.1"
3. `release-please-config.json` contains `last-release-sha` with SHA `77d036884b51318b1d3443578d2fa2e99bffca3f`
4. `pnpm build && pnpm zip` produces `quicktab-v1.0.1-chrome.zip`
5. No old version (0.12.3) artifacts remain in .output/
</success_criteria>

<output>
After completion, create `.planning/phases/07-version-sync/07-01-SUMMARY.md`
</output>
