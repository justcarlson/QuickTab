---
phase: 05-webstore-compliance
plan: 03
type: execute
wave: 2
depends_on: ["05-01", "05-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "PRIVACY.md URL is publicly accessible in incognito"
    - "Build produces correctly named ZIP artifact"
    - "All phase success criteria verified"
  artifacts: []
  key_links: []
---

<objective>
Verify web store compliance and complete phase wrap-up.

Purpose: Ensure all compliance artifacts are ready for Chrome Web Store submission before merging feature branch.
Output: Verified compliance, phase completion, PR ready.
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-webstore-compliance/05-CONTEXT.md
@.planning/phases/05-webstore-compliance/05-01-SUMMARY.md
@.planning/phases/05-webstore-compliance/05-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify build and ZIP output</name>
  <files></files>
  <action>
Run verification commands to confirm compliance:

1. Build the extension:
   ```bash
   npm run build
   ```

2. Create ZIP artifact:
   ```bash
   npm run zip
   ```

3. Verify ZIP naming follows template:
   - Should be: quicktab-v{version}-chrome.zip
   - Check: `.output/quicktab-v0.11.8-chrome.zip` (or current version)

4. Verify ZIP contents:
   - No .map files included
   - manifest.json has correct permissions (no scripting)
   - All required files present

5. Verify manifest permissions in built output:
   ```bash
   unzip -p .output/*.zip manifest.json | jq '.permissions'
   ```
   Expected: ["webNavigation", "tabs", "storage"]
  </action>
  <verify>ls -la .output/*.zip && unzip -l .output/*.zip | grep -c ".map"</verify>
  <done>ZIP artifact exists with version in name, contains 0 .map files, manifest has correct permissions</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Web Store compliance package:
    - PRIVACY.md at repository root
    - Updated README.md with expanded Permissions section
    - STORE-METADATA.md with listing content
    - wxt.config.ts with correct permissions and build settings
    - ZIP artifact with versioned naming
  </what-built>
  <how-to-verify>
    1. Open PRIVACY.md and verify:
       - Plain language, not legal jargon
       - States "We don't collect your data"
       - Explains all permissions in user-friendly terms
       - Has GitHub issues link for questions

    2. Open README.md and verify:
       - Permissions section has table format
       - Includes "What We Don't Request" subsection
       - Links to PRIVACY.md

    3. Check .output/ directory:
       - ZIP file exists with name like quicktab-v0.11.8-chrome.zip
       - No .map files in the ZIP (run: unzip -l .output/*.zip | grep ".map")

    4. Test PRIVACY.md URL accessibility:
       - After PR merge, test in incognito:
         https://github.com/zendesklabs/QuickTab/blob/master/PRIVACY.md
       - Note: This test happens post-merge, not during verification

    5. Review STORE-METADATA.md for completeness:
       - Store description present
       - Permission justifications ready
       - Verification checklist included
  </how-to-verify>
  <resume-signal>Type "approved" to proceed to PR creation, or describe any issues</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Create feature branch and PR</name>
  <files></files>
  <action>
1. Ensure we're on the correct feature branch:
   ```bash
   git checkout -b feat/phase-5-webstore-compliance 2>/dev/null || git checkout feat/phase-5-webstore-compliance
   ```

2. Stage all phase changes:
   ```bash
   git add PRIVACY.md README.md wxt.config.ts .planning/phases/05-webstore-compliance/
   ```

3. Commit with conventional commit message:
   ```bash
   git commit -m "docs(05): add web store compliance artifacts

   - Add PRIVACY.md with plain-language privacy policy
   - Expand README Permissions section with detailed explanations
   - Remove unused scripting permission from manifest
   - Configure production sourcemaps (hidden) and ZIP naming
   - Create STORE-METADATA.md with listing content for submission

   Closes phase 5 requirements: STORE-01, STORE-02, STORE-04, STORE-05"
   ```

4. Push branch:
   ```bash
   git push -u origin feat/phase-5-webstore-compliance
   ```

5. Create PR via gh CLI:
   ```bash
   gh pr create --title "Phase 5: Web Store Compliance" --body "## Summary

   Prepares QuickTab for Chrome Web Store submission.

   ### Changes
   - **PRIVACY.md**: Plain-language privacy policy emphasizing no data collection
   - **README.md**: Expanded Permissions section with table format
   - **wxt.config.ts**: Removed unused scripting permission, configured production builds
   - **STORE-METADATA.md**: Chrome Web Store listing content ready for submission

   ### Verification
   - [x] PRIVACY.md exists with required sections
   - [x] README links to PRIVACY.md
   - [x] Manifest has only used permissions (webNavigation, tabs, storage)
   - [x] ZIP artifact builds with version in filename
   - [x] No source maps in production ZIP

   ### Phase Success Criteria
   1. ✅ Privacy policy document exists and explains data handling
   2. ✅ manifest.json contains only permissions actively used in code
   3. ✅ Code is minified but readable (not obfuscated)
   4. ✅ Store listing has updated description and screenshots

   Closes: Phase 5"
   ```
  </action>
  <verify>gh pr view --json url,state</verify>
  <done>PR created for feat/phase-5-webstore-compliance, targeting master branch</done>
</task>

</tasks>

<verification>
1. `ls -la .output/*.zip` - Versioned ZIP exists
2. `gh pr list --head feat/phase-5-webstore-compliance` - PR exists
3. All phase success criteria from ROADMAP.md verified
</verification>

<success_criteria>
- ZIP artifact builds with correct name and no source maps
- Human verification approves compliance package
- PR created and ready for review
- Phase 5 complete, ready for tagging after merge
</success_criteria>

<output>
After completion, create `.planning/phases/05-webstore-compliance/05-03-SUMMARY.md`
</output>
